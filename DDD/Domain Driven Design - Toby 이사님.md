# Overview

![image](https://github.com/eastperson/TIL/assets/66561524/b4fc3acf-42a6-46e7-a517-052e4de9dbc0)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/68368942-471f-422a-8349-bc9a47bd2e61/Untitled.png)

- 2005년 ~ 2007년 DDD 우세
    - 그 이후 하강
    - MSA 대두되면서 DDD 다시 떠오름
    - MSA도 살짝 꺽이는 추세
    - TDD(Test Driven Development)는 개발 방법
    - DDD는 Design
- DDD는 책 이름
    - Eric Evans 2003년에 출간
        - Erir Evans는 SI 업체에서 컨설턴트
        - Erir Evans 링크드인 : 소프트웨어 디자이너로 소개
    - Tackling Complexity in the Heart of Software
    - 번역했을 때, 생각보다 인기가 없었음. 어려움.
        - 사실 책이 어려움
        
        ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3429a08e-e1e6-46bf-9361-2208f29469ab/Untitled.png)
        
    - 실제 경험했던 예시를 통해 설명

**DDD?**

- **DDD는 철학**
    - 객체지향 커뮤니티에는 내가 “도메인 주도 설계(DDD)”라고 칭하는 하나의 철학이 나타났다. (Eric Evans)
    - DDD는 에릭 에반스가 그 책에서 정의한 개발 철학이다. (Scott Millet)
        - 최근에 나온 PPP DDD 저자
- **DDD는 모델링**
    - DDD는 모델링이 핵심이다.
    - 도메인 모델이 없으면 DDD가 아님
    - 도메인 모델이 모델링, 설계, 개발, 유지보수의 핵심 커뮤니케이션 수단이자 CI 대상이 아니면 DDD가 아님
    - 도메인의 뜻: 소프트웨어를 사용하는 유저가 소프트웨어를 통해 기대하는 ‘무언가’
        - 꼭 현실 세계의 반영이라고 생각하지 않아도 된다.
    - 모델의 뜻: 여기에서 가장 중요하다고 생각하는 것에서 추상화 해놓은 것.
        - 추상화의 뜻: 이미 대상이 존재하며, 거기서 **중요한 것**들만 뽑아서 모은 것.
            - 아무거나 공통적으로 뽑아냈다고 해서 추상화가 아니다. 중요한 것을 뽑아낸 것이 추상화이다.
    - 도메인 모델이 결국 추상화이다.
    - 기존 비즈니스를 하는 회사에 조인하면 도메인 전문가가 도메인 설명을 해준다.
        - 커뮤니케이션을 해줘야 한다.
    - DDD에서 말하는 것은 도메인 전문가와 소프트웨어가 만나 같이 모델을 만들고 그 모델을 통하여 커뮤니케이션을 하자고 정하는 것이다. 예전에는 모델링을 하기위해 UML을 사용했었다. (20년전) 다이어그램으로 도메인 모델을 표현한다. 모델은 그림말고 문서로 정의할 수도 있다. 여튼 무언가로 기록한 것.
    - 도메인 전문가도 소프트웨어 전문가도 모델을 이해할 수 있어야 한다. 모델로 커뮤니케이션할 때 서로가 이해하고 있는 내용이 동일한지 알아야 한다. 모델링 (다이어그램 등) → 설계 (ERD 등) → 개발
    - 모든 커뮤니케이션 중심에 도메인 모델을 둔다. 도메인 모델은 한 번만 만드는 것이 아니라 비즈니스가 발전하면서 새로 생기거나 변경된 내용 등을 도메인 모델에 반영해야 한다.
    - 이전에는 비즈니스에 대해 분석 모델을 만들어서 소프트웨어 설계하는 사람한테 던져서 줬다. 그런데 분석 모델과 구현 모델에 차이가 발생하게 된다. 그래서 모델과 초기 모델과 설계 등등이 분리되었다. 결국 예상한 모델이랑 완성된 개발의 구현이 괴리가 생긴다.
        - 다시 개발 → 무한루프
    - **도메인 모델을 도메인 전문가와 소프트웨어 전문가가 만나서 모델링하고 모델과 소프트웨어 설계를 일치시키는 것이다. (Domain Model Driven Design)**
- **DDD는 패턴과 실천법**
    - DDD에는 많은 모델링 패턴이 등장
        - 엔티티
        - VO(요즘에는 DTO와 비슷한 의미로 쓰임)
            - 원래 VO의 의미는 값이 변하지 않는 재사용 가능한 정보
        - Service
        - Aggregate
        - Repository(기존에 사용하던 DAO가 DDD의 유행으로 Repository로 바뀜)
    - 베스트 프랙티스 제시
        - 전략적인 설계
        - bounded context
            - MSA에서 DDD를 사용하기 위한 이유.
            - bounded context 단위로 서비스를 쪼갠다는 의미다.
        - 유비쿼터스 랭귀지
            - 도메인 전문가가 쓰는 언어와 개발자가 쓰는 언어가 다른 경우가 굉장히 많다.
            - 양쪽 언어를 아는 일부가 커뮤니케이션을 해야한다. 개발자들 사이에서도 언어가 섞이는 경우가 많다.
            - 도메인 전문가가 현장에서 사용하는 용어가 있고, 개발자가 쓰는 언어가 있어서 서로 만나서 모델을 잘 만들다보면 용어에 대해 합의를 봐야한다. 그렇게 우리들만의 정확한 언어를 만들어 용어를 단일화시킨다.
            - bounded context안에서 각각에 만들어지는 것을 의미한다. 그 외부에서는 용어가 다를 수 있음을 인지해야 한다.
            - 모델도 bonded context에서 하나씩 나온다.
- **DDD는 소프트웨어 개발의 복잡함을 해결할 수 있을까?**
    - 복잡함이 2배!
    - 잘 준비하고 숙련된 컨설턴트, 작은 규모의 프로젝트에서 부터
    - 전 세계 프로젝트에서 5%정도만이 DDD를 도입했을 때 이득을 본다고 하는 얘기도 있다.
- **DDD의 핵심**
    - Focus on the core complexity and opportunity in the domain.
        - 도메인의 복잡성에 대해서 모두가 포커스를 맞춰야 한다.
    - Explore models in a collaboration of domain experts and software experts.
        - 도메인 전문가와 소프트웨어 전문가가 모델에 대해 탐험(만들고, 고치고)을 협력하는 것이다.
    - Write software that expresses those models explicitly.
        - 모델을 소프트웨어로 표현해야 한다. 설계와 구현까지 끌고가자.
    - Speak a ubiquitous language within a bounded context.
        - bounded context 안에서 공용의 언어를 사용해야 한다.
- **DDD를 과연 적용할 것인가**
    - 보통 DDD에 대해 물음에 대한 답을 기술적인 내용에 초점을 맞춰서 한다. 클린 아키텍쳐(로버트 마틴)에도 DDD에 기반했다. 헥사고날 아키텍쳐도. 설계부터 초점을 맞춰서 생각하는 것이 좋다.
        - 도메인이 다른 외부의 영향을 받지 않게 하는 방법.
        - DDD 라이트라는 개념도 생겨 났다.
- **일부 유용한 패턴, 프랙티스 도입**
    - 전략적 설계: bounded context, subdomain …
    - 모델링 빌링 블록: Entity, VO, Repository …
        - DDD에서는 Repository 인터페이스는 Domain 계층 안에 있어야 한다. 구현체는 바깥.
        - 만들면서 배우는 클린 아키텍쳐
    - 베스트 프랙티스: 도메인 지식 크런칭, 유비쿼터스 언어, CI …
        - 여기서 출발. 유비쿼터스 언어가 가장 출발하기 좋다. 기획팀이랑 언어를 통일하는 것이다.

DDD를 지향하는 프랙티스를 하려고 하고 있다.

- **DDD는 모델링**
    - 협업 커뮤니케이션 수단으로 사용되는 도메인 모델을 만들고 유지하지 못한다면 DDD라고 부르지 말자
    - 도메인 모델은 뭘로 만들 건가
    - UML for development 로버틴 마틴 책
        
        [UML 실전에서는 이것만 쓴다 - 교보문고](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&barcode=9788991268937)
        
- **DDD의 발전**
    - DDD는 2003년 소프트웨어 설계 컨설턴트가 SI 하다가 만든 것
    - 지금은 인터넷 서비스, 기존 비즈니스가 없는 스타트업, 모바일, 클라우드 초거대 서비스 등등
        - DDD 적용하려니 어려워서 만들었다 - CQRS, ES, Event Storming, Domain Events
            - 어려워서 적용하다가 실패하는 경우가 꽤 많다.
                - 쿠팡에서도 시도했다가 망했다.
            - ex) domain events. 유저 회원 가입 이벤트 발생 → 메일 서비스에 전달 → 메일 서비스 기능. 느슨하게 서비스를 분리. SQS 같은 것으로 진행. 서비스를 응집된 형태의 핵심 코드만 남기고 나머지 부분을 느슨하게 분리할 수 있다.
            - 배달의 민족 5주년 김영한 주문량에 대한 얘기한 것이 있다.
                - 도메인 이벤트를 사용해서 이것들을 느슨하게 분산시켰다.
                - 권용근 - 김영한 오른팔. 이 내용(도메인 이벤트)을 정리해서 우아한 형제 테크 블로그에 올림.
                - 서비스 레이어에 코드가 길어지는 것을 깔끔하게 처리할 수 있다. 서비스 코드가 길어지면 트랜잭션이 길어지고 락이 걸린다. 이메일, 푸시를 보내는 경우에 그 문제때문에 트랜잭션을 처리하지 못할 수 있다. 트랜잭셔널, 비동기 처리에 관한 내용이다.
                - 이벤트 스토밍 - 소프트웨어 개발자가 아닌 사람도 이벤트에 대해서 잘 이해할 수 있겠다는 개념에서 시작. 우아한 테크 코스 jason(박재성)이 한 것.
                    - 포스트잇을 붙여가면서 도메인 지식에 대해서 얘기하는 것.
    - 다양한 접근, 실천 방법을 가진 나만의 DDD 서적 등장 - IDDD, PPPDDDD, 도메인 주도 설계(개발) 시작하기
- DDD를 진지하게 알고 싶다면 - 책 추천
    - 도메인 주도 설계의 본질 - 조영호
        - 추천
    - 도메인 주도 설계 첫걸음
    - 도메인 주도 설계 구현
        - Spring으로 예제
    - 도메인 주도 설계 핵심
    - 도메인 주도 설계 철저 입문
    - 도메인 주도 설계란 무엇인가?
    - DDD Start! - 최범균
    - UML을 활용한 객체지향 분석 설계
    - UML 실전에는 이것만 쓴다.

> **모든 커뮤니케이션 based on Ubiquitous Language based on Domain Model!**
